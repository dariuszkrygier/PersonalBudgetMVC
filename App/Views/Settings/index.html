{% extends 'base.html' %}

{% block title %}Ustawienia{% endblock %}

{% block body %}


    <h1 class="naglowek">Ustawienia</h1>

<main>
	
		
		
	<article>
		
		<div class="container accordion my-5">
			
			<div id="accordion" >
			
				<div class="card">
					<div class="card-header">
						<a class="card-link text-dark font-weight-bold" data-toggle="collapse" href="#collapseOne">
						  <i class="far fa-address-card"></i> Profil użytkownika
						</a>
					</div>
					<div id="collapseOne" class="collapse" data-parent="#accordion">
						<div class="card-body">
							<button type="button"  class="btn btn-success changebutton"  data-toggle="modal" data-target="#">Zmień imię <i class="fa fa-user"></i>  </button>
						</div>	
						<div class="card-body">
						
							<button type="button" class="btn btn-success changebutton"  data-toggle="modal" data-target="#">Zmień email <i class="fa fa-envelope"></i> </button>
						</div>
						<div class="card-body">
							<button type="button"  class="btn btn-success changebutton"  data-toggle="modal" data-target="#">Zmień hasło <i class="fa fa-key"></i> </button>
						</div>
						<div class="card-body">
							<button type="button"  class="btn btn-warning changebutton" data-toggle="modal" data-target="#">Usuń konto <i class="fas fa-user-slash"></i> </button>
						</div>
					</div>
				  </div>
				
				<div class="card">
					<div class="card-header">
						<a class="collapsed card-link text-dark font-weight-bold " data-toggle="collapse" href="#collapseTwo">
							<i class="fas fa-money-bill-wave"></i> Edytuj przychody
						</a>
					</div>
					<div id="collapseTwo" class="collapse" data-parent="#accordion">
						<div class="card-body text-left my-1 text-light">
							{% if incomeCategories is not empty %}
						  {% for incomeCategory in incomeCategories %}
							<div class="row border-bottom border-dotted insideAccordion" id="income{{ incomeCategory.id }}">
							  <div class="col">
								{{ incomeCategory.name }}
							
							  </div>
							  <div class="col my-1 ">
								<span data-toggle="tooltip" data-placement="top" title="Usuń">
									<button class="btn btn-sm btn-danger pull-right mx-1" data-toggle="modal" data-target="#incomeDeletemodal{{ incomeCategory.id }}">
									  <i class="far fa-trash-alt"></i>
									</button>
								</span>
								<span data-toggle="tooltip" data-placement="top" title="Edytuj">
									<button class="btn btn-sm btn-secondary pull-right" data-toggle="modal" data-target="#incomeEditModal{{ incomeCategory.id }}">
									  <i class="fas fa-wrench"></i>
									</button>
								</span>
							
							</div>
							</div>  
						  {% endfor %}
							{% else %}
							  <p class="text-light"> Brak kategorii przychodów </p>
							{% endif %}
						</div>
						<div class="row d-flex justify-content-center">
						  <button class="btn btn-secondary" data-toggle="modal" data-target="#addNewIncomeModal"><i class="fas fa-plus"></i>  Dodaj nową kategorię</button>
						  
						</div>
					</div>
				</div>
				
				<div class="card">
				  <div class="card-header">
					<a class="collapsed card-link text-dark font-weight-bold" data-toggle="collapse" href="#collapseThree">
					  <i class="fas fa-cart-arrow-down"></i> Edytuj wydatki
					</a>
				  </div>
				  <div id="collapseThree" class="collapse" data-parent="#accordion">
					<div class="card-body text-left my-1 text-light">
					  
					  	{% if expenseCategories is not empty %}
                      {% for expenseCategory in expenseCategories %}
                        <div class="row border-bottom insideAccordion" id="expense{{ expenseCategory.id }}">
                          <div class="col">
                            {{ expenseCategory.name }}
						
                          </div>
						  <div class="col my-1 ">
							<span data-toggle="tooltip" data-placement="top" title="Usuń">
							    <button class="btn btn-sm btn-danger pull-right mx-1" data-toggle="modal" data-target="#expenseDeleteModal{{ expenseCategory.id }}">
								  <i class="far fa-trash-alt"></i>
								</button>
							</span>
							<span data-toggle="tooltip" data-placement="top" title="Edytuj">
								<button class="btn btn-sm btn-secondary pull-right " data-toggle="modal" data-target="#expenseEditModal{{ expenseCategory.id }}">
								  <i class="fas fa-wrench"></i>
								</button>
							</span>
							<span data-toggle="tooltip" data-placement="top" title="Ustaw limit">
								<button class="btn btn-sm btn-warning pull-right mx-1" data-toggle="modal" data-target="#expenseLimitModal{{ expenseCategory.id }}">
								  <i class="fas fa-arrows-alt-h"></i>
								</button>
							</span>
						
						</div>
                        </div>  
                      {% endfor %}
                    {% else %}
                      <p class="text-light"> Brak kategorii wydatków</p>
                    {% endif %} 
					</div>
					<div class="row d-flex justify-content-center">
                      <button class="btn btn-secondary" data-toggle="modal" data-target="#addNewExpenseModal"><i class="fas fa-plus" ></i>  Dodaj nową kategorię</button>
                    </div>
				  </div>
				</div>
				
				<div class="card">
				  <div class="card-header">
					<a class="collapsed card-link text-dark font-weight-bold" data-toggle="collapse" href="#collapseFour">
					  <i class="fas fa-credit-card"></i> Edytuj metody płatności
					</a>
				  </div>
				  <div id="collapseFour" class="collapse" data-parent="#accordion">
					<div class="card-body text-left text-light my-1">
					  
					  	{% if paymentCategories is not empty %}
                      {% for paymentCategory in paymentCategories %}
                        <div class="row border-bottom insideAccordion" id="payment{{ paymentCategory.id }}">
                          <div class="col">
                            {{ paymentCategory.name }}
						
                          </div>
						  <div class="col my-1 ">
						   <button class="btn btn-sm btn-danger pull-right mx-1" data-toggle="modal" data-target="#paymentDeleteModal{{ paymentCategory.id }}">
                              <i class="far fa-trash-alt"></i>
                            </button>
						  		<button class="btn btn-sm btn-secondary pull-right" data-toggle="modal" data-target="#paymentEditModal{{ paymentCategory.id }}">
                              <i class="fas fa-wrench"></i>
                            </button>
						
						
						</div>
                        </div>  
                      {% endfor %}
						{% else %}
						  <p class="text-light"> Brak metod płatności </p>
						{% endif %}
					  
					</div>
					<div class="row d-flex justify-content-center">
						  <button class="btn btn-secondary" data-toggle="modal" data-target="#addNewPaymentModal"><i class="fas fa-plus" ></i>  Dodaj metodę płatności</button>
						</div>
				  </div>
				</div>
			</div>
		</div>
		
		<!--
		<div class="container">
		
		
		
			<div class="row settings" >
					<h5 class="text-light">Użytkownik: {{ user.name }}</h3>
			</div>		
					
			<div class="row settings" >	
					<h5 class="text-light">Email: {{ user.email }}</h3>
			</div>
				
			<div class="row settings" >
			
				<div class="btn-group-vertical buttonsSettings">
				
					<button type="button" id="flip" class="btn btn-light changebutton">Profil użytkownika</button>
			
					<button type="button" id="toggleChangeName" class="btn btn-success changebutton">Zmień imię <i class="fa fa-user"></i>  </button>
					
					<button type="button" id="toggleChangeEmail" class="btn btn-success changebutton">Zmień email <i class="fa fa-envelope"></i> </button>
					
					<button type="button" id="toggleChangePassword" class="btn btn-success changebutton">Zmień hasło <i class="fa fa-key"></i> </button>
					
					<button type="button" id="toggleDeleteAccount" class="btn btn-warning changebutton">Usuń konto <i class="fas fa-user-slash"></i> </button>
			
				
			
				<button type="button" class="btn btn-dark changebutton collapsed"  data-toggle="collapse" data-target="#incomeCategoriesCollapse" aria-expanded="false" aria-controls="editIncomeCategories">Edytuj kategorie przychodów</button>
			
			 
		    <div id="incomeCategoriesCollapse" class="accordion-collapse collapse my-2">
                
                <div class="accordion-body settings">
				
                  <div id="incomeCategoriesBody">
                    {% if incomeCategories is not empty %}
                      {% for incomeCategory in incomeCategories %}
                        <div class="row" id="income{{ incomeCategory.id }}">
                          <div class="col">
                            <li class="list-group-item list-group-item-light d-flex list-inline-item" >{{ incomeCategory.name }}
							
							<button class="btn btn-sm btn-secondary" >
                              <i class="fas fa-wrench"></i>
                            </button>
						
						
							 <button class="btn btn-sm btn-danger" >
                              <i class="far fa-trash-alt"></i>
                            </button>
							</li>
							
                          </div>
                       
                        </div>  
                      {% endfor %}
                    {% else %}
                      Brak kategorii przychodów
                    {% endif %}
                    
                  </div>

                 <button type="button" class="btn btn-info changebutton">Dodaj nową kategorię</button>

                </div>
              </div>
			 
			
				<button type="button"  class="btn btn-light changebutton">Edytuj kategorie przychodów</button>
			
			
				
			
				<button type="button"  class="btn btn-dark changebutton">Edytuj metody płatności</button>
			</div>

			
		</div>
		</div>
-->
	</article>
		
</main>
		                    
                           
{% endblock %}

{% block footer %}

<!-- INCOMES MODALS-->

<!-- income modal edit-->
		<div class="modal fade" id="incomeEditModal{{ incomeCategory.id }}" tabindex="-1" aria-labelledby="editmodallabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="editmodallabel">Zmień nazwę</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="close">
						  <span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<div class="modal-text">Podaj nową nazwę kategorii:
										
							<form action="/settings/updateIncomesCategory" method="post" >
								<input type="hidden" value={{ incomeCategory.id }} name="currentId">
								<input type="text" class="form-control" placeholder="nowa nazwa" name="newName" required>
								<br>
								Czy na pewno chcesz zmienić nazwę ? 
						</div>	

					</div>
					<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Anuluj</button>
								<input class="btn btn-success" type="submit" value="Zapisz zmiany"/>
							</form>
					</div>
				</div>
			</div>
		</div>	
		
		
<!-- income modal delete-->
								<div class="modal fade" id="incomeDeletemodal{{ incomeCategory.id }}" tabindex="-1" aria-labelledby="deletemodallabel" aria-hidden="true">
								  <div class="modal-dialog">
									<div class="modal-content">
									  <div class="modal-header">
										<h5 class="modal-title" id="deletemodallabel">Usuń kategorię</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="close">
											 <span aria-hidden="true">&times;</span>
										</button>	
									  </div>
									  <div class="modal-body modal-text">
										<form action="/settings/deleteIncomesCategory" method="post" >
										  <input type="hidden" value={{ incomeCategory.id }} name="deletedId">
										  Czy na pewno chcesz usunąć całą kategorię wraz ze wszystkimi przychodami?
										  										  
									  </div>
									  <div class="modal-footer">
										  <button type="button" class="btn btn-secondary" data-dismiss="modal">Anuluj</button>
										  <input class="btn btn-danger" type="submit" value="Usuń"/>
										</form>
										
										
									  </div>
									</div>
								  </div>
								</div>
								
								
<!-- modal income add new-->
						<div class="modal fade" id="addNewIncomeModal" tabindex="-1" aria-labelledby="addmodallabel" aria-hidden="true">
						  <div class="modal-dialog">
							<div class="modal-content">
							  <div class="modal-header">
								<h5 class="modal-title" id="addmodallabel">Dodaj nową kateogrię przychodów</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="close">
								  <span aria-hidden="true">&times;</span>
								</button>
							  </div>
							  <div class="modal-body">
								<div class="modal-text">Podaj nazwę nowej kategorii przychodów:
								  <form action="/settings/addIncomesCategory" method="post" >
									<input type="text" class="form-control" placeholder="nazwa" name="newName" required>
								</div>
							  </div>
							  <div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Anuluj</button>
								<input class="btn btn-success" type="submit" value="Zapisz zmiany"/>
								</form>
							  </div>
							</div>
						  </div>
						</div>	

<!-- EXPENCES MODALS-->					
		
<!-- expense modal edit-->
		<div class="modal fade" id="expenseEditModal{{ expenseCategory.id }}" tabindex="-1" aria-labelledby="editmodallabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="editmodallabel">Zmień nazwę</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="close">
						  <span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<div class="modal-text">Podaj nową nazwę kategorii:
										
							<form action="/settings/updateExpenseCategory" method="post" >
								<input type="hidden" value={{ expenseCategory.id }} name="currentId">
								<input type="text" class="form-control" placeholder="nowa nazwa" name="newName" required>
								<br>
								Czy na pewno chcesz zmienić nazwę ? 
						</div>	

					</div>
					<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Anuluj</button>
								<input class="btn btn-success" type="submit" value="Zapisz zmiany"/>
							</form>
					</div>
				</div>
			</div>
		</div>	
		
<!-- expense modal limit-->
								<div class="modal fade" id="expenseLimitModal{{ expensCategory.id }}" tabindex="-1" aria-labelledby="limitmodallabel" aria-hidden="true">
								  <div class="modal-dialog">
									<div class="modal-content">
									  <div class="modal-header">
										<h5 class="modal-title" id="editmodallabel">Dodaj limit</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="close">
										  <span aria-hidden="true">&times;</span>
										</button>
									  </div>
									  <div class="modal-body">
										<div class="modal-text">Podaj limit wydatków w danej kategorii:
										
										<form action="/settings/limitExpensesCategory" method="post" >
											<input type="hidden" value={{ expensCategory.id }} name="currentId">
											<input type="number" step="0.01" class="form-control" placeholder="limit wydatków" name="limit" required>
											</div>
										</div>
										<div class="modal-footer">
										<button type="button" class="btn btn-secondary" data-dismiss="modal">Anuluj</button>
										<input class="btn btn-success" type="submit" value="Zapisz zmiany"/>
										</form>
										<form action="/settings/deleteLimitExpensesCategory" method="post" >
											<input type="hidden" value={{ expensCategory.id }} name="currentId">
											<input class="btn btn-danger" type="submit" value="Usuń limit"/>
										</form>
									  </div>
									</div>
								  </div>
								</div>	
								
<!-- expense modal delete-->
								<div class="modal fade" id="expenseDeleteModal{{ expenseCategory.id }}" tabindex="-1" aria-labelledby="deletemodallabel" aria-hidden="true">
								  <div class="modal-dialog">
									<div class="modal-content">
									  <div class="modal-header">
										<h5 class="modal-title" id="deletemodallabel">Usuń kategorię</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="close">
											 <span aria-hidden="true">&times;</span>
										</button>	
									  </div>
									  <div class="modal-body modal-text">
										<form action="/settings/deleteExpenseCategory" method="post" >
										  <input type="hidden" value={{ expensCategory.id }} name="deletedId">
										  Czy na pewno chcesz usunąć całą kategorię wraz ze wszystkimi wydatkami?
										  										  
									  </div>
									  <div class="modal-footer">
										  <button type="button" class="btn btn-secondary" data-dismiss="modal">Anuluj</button>
										  <input class="btn btn-danger" type="submit" value="Usuń"/>
										</form>
										
										
									  </div>
									</div>
								  </div>
								</div>
								
<!-- modal expence add new-->
						<div class="modal fade" id="addNewExpenseModal" tabindex="-1" aria-labelledby="addmodallabel" aria-hidden="true">
						  <div class="modal-dialog">
							<div class="modal-content">
							  <div class="modal-header">
								<h5 class="modal-title" id="addmodallabel">Dodaj nową kateogrię wydatków</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="close">
								  <span aria-hidden="true">&times;</span>
								</button>
							  </div>
							  <div class="modal-body">
								<div class="modal-text">Podaj nazwę nowej kategorii wydatków:
								  <form action="/settings/addExpensesCategory" method="post" >
									<input type="text" class="form-control" placeholder="nazwa" name="newName" required>
								</div>
							  </div>
							  <div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Anuluj</button>
								<input class="btn btn-success" type="submit" value="Zapisz zmiany"/>
								</form>
							  </div>
							</div>
						  </div>
						</div>	


<!-- PAYMENT MODALS-->		
							
<!-- payment modal edit-->
		<div class="modal fade" id="paymentEditModal{{ paymentCategory.id }}" tabindex="-1" aria-labelledby="editmodallabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="editmodallabel">Zmień nazwę</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="close">
						  <span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<div class="modal-text">Podaj nową nazwę metody płatności:
										
							<form action="/settings/updatePaymentMethod" method="post" >
								<input type="hidden" value={{ paymentCategory.id }} name="currentId">
								<input type="text" class="form-control" placeholder="nowa nazwa" name="newName" required>
								<br>
								Czy na pewno chcesz zmienić nazwę ? 
						</div>	

					</div>
					<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Anuluj</button>
								<input class="btn btn-success" type="submit" value="Zapisz zmiany"/>
							</form>
					</div>
				</div>
			</div>
		</div>									

<!-- payment modal delete-->
								<div class="modal fade" id="paymentDeleteModal{{ paymentCategory.id }}" tabindex="-1" aria-labelledby="deletemodallabel" aria-hidden="true">
								  <div class="modal-dialog">
									<div class="modal-content">
									  <div class="modal-header">
										<h5 class="modal-title" id="deletemodallabel">Usuń metodę płatności</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="close">
											 <span aria-hidden="true">&times;</span>
										</button>	
									  </div>
									  <div class="modal-body modal-text">
										<form action="/settings/deletePaymentMethod" method="post" >
										  <input type="hidden" value={{ paymentCategory.id }} name="deletedId">
										  Czy na pewno chcesz usunąć wybraną metodę płatności?
										  										  
									  </div>
									  <div class="modal-footer">
										  <button type="button" class="btn btn-secondary" data-dismiss="modal">Anuluj</button>
										  <input class="btn btn-danger" type="submit" value="Usuń"/>
										</form>
										
										
									  </div>
									</div>
								  </div>
								</div>								
								
<!-- modal payment add new-->
						<div class="modal fade" id="addNewPaymentModal" tabindex="-1" aria-labelledby="addmodallabel" aria-hidden="true">
						  <div class="modal-dialog">
							<div class="modal-content">
							  <div class="modal-header">
								<h5 class="modal-title" id="addmodallabel">Dodaj nową metodę płatności</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="close">
								  <span aria-hidden="true">&times;</span>
								</button>
							  </div>
							  <div class="modal-body">
								<div class="modal-text">Podaj nazwę nowej metody płatności:
								  <form action="/settings/addPaymentCategory" method="post" >
									<input type="text" class="form-control" placeholder="nazwa" name="newName" required>
								</div>
							  </div>
							  <div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Anuluj</button>
								<input class="btn btn-success" type="submit" value="Zapisz zmiany"/>
								</form>
							  </div>
							</div>
						  </div>
						</div>									
{% endblock %}
